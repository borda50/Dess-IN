<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dess'IN la ville</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        .hidden { display: none; }
        button {
            font-size: 20px;
            padding: 15px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        #start { background-color: #007bff; color: white; }
        .difficulty[data-level="simple"] { background-color: #4CAF50; color: white; }
        .difficulty[data-level="moyen"] { background-color: #FFC107; color: white; }
        .difficulty[data-level="difficile"] { background-color: #DC3545; color: white; }
        #success { background-color: #4CAF50; color: white; }
        #pass { background-color: #DC3545; color: white; }
        #restart, #continue { background-color: #007bff; color: white; }
        #word { font-size: 40px; font-weight: bold; }
    </style>
</head>
<body>
    <audio id="beep" src="bip.mp3"></audio>
    <audio id="lose" src="lose.mp3"></audio>
    <audio id="win" src="win.mp3"></audio> 
    <button id="start">‚ñ∂Ô∏è LANCER</button>
    <div id="game" class="hidden">
        <h2 id="timer">90s</h2>
        <h3 id="counter">0 r√©ussis / 0 tent√©s</h3>
        <div id="difficulty-choices">
            <button class="difficulty" data-level="simple">üòÄ Simple</button>
            <button class="difficulty" data-level="moyen">üòê Moyen</button>
            <button class="difficulty" data-level="difficile">üòà Difficile</button>
        </div>
        <h2 id="word" class="hidden"></h2>
        <div id="action-buttons" class="hidden">
            <button id="success">‚úÖ R√âUSSI</button>
            <button id="pass">üîÑ PASSER (-15sec)</button>
        </div>
    </div>
    <h2 id="result" class="hidden"></h2>
    <button id="restart" class="hidden">üîÅ RECOMMENCER</button>
    <button id="continue" class="hidden">‚û° Prochain joueur</button>
    <script>
        let availableWords = {
            simple: ["Soleil", "Lune", "Marguerite", "Etoile", "Main", "Cerise", "Nuage", "Chapeau", "Fromage", "Bouteille", "Escargot", "Ballon", "Cercle", "Araignee",
"Glace", "Chateau", "Papillon", "Carr√©", "Boite", "Maison", "Pizza", "Chaise", "Tour eiffel", "Igloo", "Poubelle", "Noel", "Porte", "Avion", "Cerf-volant",
"Couteau", "Echelle", "Toit", "Horloge", "Coeur", "Pluie", "Arbre", "Table", "Smiley", "Tapis", "Loupe", "Triangle", "Carre", "Herbe", "Montagne",
"Fl√®che", "Lac", "Fleur", "Stylo", "Crayon", "Carrotte", "Tasse", "Escalier", "Dent", "Poisson", "Toboggan", "T√©l√©commande", "Os", "Th√©", "Casserole",
"Usine", "Bureau", "Ovale", "Parall√®le", "Angle droit", "Route", "Reveil", "Parapluie", "Marteau", "Moustache", "Pourcentage", "Lettre", "Chiffre", "Explosion", "Bonhomme b√¢ton",
"Cravate", "Souris", "Club de golf", "Boomerang", "Douche", "Cicatrice", "M√©t√©orite", "Croix", "Demi-cercle", "Hexagone", "Podium", "Piece", "Oeil", "Lunettes", "Point d'interrogation",
"Point d'interrogation", "√âtoile filante", "Serpent", "Pont", "Rectangle", "Signe +", "Signe =", "Ressort", "Tire bouchon", "Cl√©"],
            moyen: ["Bonbon", "Sabre", "Sapin", "Bague", "Appareil photo", "Bouche", "Television", "Voiture", "Sac", "Chemin", "Poire", "Assiette", "Vis", "Lit",
"Ordinateur", "Feuille", "Livre", "√âclair", "Goutte", "Banane", "Prise electrique", "Cactus", "Tournevis", "Pelle", "Scie", "Couronne", "√âp√©e", "Botte", "D√©s",
"Vague", "Arc", "Pain", "Champignon", "Big ben", "Canape", "Drapeau", "Feu d'artifice", "Balai", "Yoyo", "Bible", "Lampe", "Soucoupe volante", "Canne a p√™che", "Oreille",
"Nez", "Verre", "Chaussette", "Casquette", "Crosses Hockey", "Allumette", "√âcrou", "Tracteur", "Oeuf", "Poign√©e", "Canette", "Note de musique", "Medicament", "Roue", "Bras",
"Aubergine", "Pied", "Fourchette", "Cuill√®re", "Crevette", "L√®vre", "Baton", "Peigne", "Cigarette", "Pile", "Ciel", "Sablier", "Parking", "Mer", "Ballon foot",
"Ballon rugby", "Volant badminton", "R√®gle", "Flocon", "Fouet", "Filet", "Voile", "T√©l√©vision", "Crabe", "Ampoule", "Flamme", "Trottinette", "Panneau", "Banc", "Fontaine",
"Cloche", "Immeuble", "Bougie", "Lampadaire", "Micro", "Noeud", "Mur", "Bambou", "Fen√™tre", "V√©lo", "Agraphe", "Trombone", "Fourche", "Jumelles"],
            difficile: ["Dinosaure", "Limousine", "Robe de mariee", "Ciseaux", "Chat", "Chien", "Oiseau", "Gateau", "Coffre fort", "Bateau", "Train", "Feu", "Bouclier", "Camion",
"Montgolfi√®re", "Fus√©e", "Clavier", "Ascenseur", "Gratte-ciel", "Peinture", "Jungle", "Cadenas", "√éle", "Phare", "Temple", "Arc-en-ciel", "√âglise", "Dragon", "Dauphin",
"Tente", "Sac √† dos", "Toupie", "Lapin", "Tortue", "Raquette", "Cheval", "Biberon", "Moulin", "Com√®te", "Sous-marin", "H√©licopth√®re", "Centrale nucleaire", "Plage", "√âolienne",
"Volcan", "Bonhomme de neige", "Poule", "Scorpion", "Mouche", "Girafe", "Arrosoir", "Musique", "Saladier", "Moustique", "Fourmi", "H√©risson", "Statue de la Libert√©e", "Serrure", "Flamant Rose",
"Astronaute", "Coq", "Billet", "Mouton", "M√©duse", "√âl√©phant", "Robot", "Tour de Pise", "Pleure", "Poumon", "Menottes", "Toilette", "Doigt", "Guitare", "Bowling",
"Cadeau", "Chariot", "Cible", "Fraise", "Map monde", "Ananas", "Brouette", "Thermostat", "Cafard", "Xylophone", "Clown", "Crapaud", "4 saisons", "Pirate", "Nuit",
"Casque", "Boite aux lettres", "Niveau", "Coquillage", "Chateau de sable", "Canard", "P√©tale", "Porte-cl√©", "Barbecue", "Faux"]
        };
        
        let timerInterval = null;
        let timeLeft = 100;
        let successCount = 0;
        let attempts = 0;

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    document.getElementById("timer").textContent = timeLeft + "s";

                    if (timeLeft < 11) {
                        document.getElementById("beep").play();
                    }
                } else {
                    clearInterval(timerInterval);
                    document.getElementById("lose").play();
                    endGame("PERDU !");
                }
            }, 1000);
        }


        function endGame(message) {
            document.getElementById("game").classList.add("hidden");
            document.getElementById("result").textContent = `${message} (${successCount} r√©ussis / ${attempts} tent√©s)`;
            document.getElementById("restart").classList.remove("hidden");

            document.getElementById("timer").textContent = timeLeft + "s";
    
            if (message === "GAGN√â !") {
                document.getElementById("win").play().catch(e => console.log("Erreur audio :", e));
            } else {
                document.getElementById("lose").play().catch(e => console.log("Erreur audio :", e));
            }
        }

        document.getElementById("start").addEventListener("click", function() {
            document.getElementById("start").classList.add("hidden");
            document.getElementById("game").classList.remove("hidden");
            startTimer();
        });
        
        document.querySelectorAll(".difficulty").forEach(button => {
            button.addEventListener("click", function() {
                let level = this.getAttribute("data-level");
 		if (availableWords[level].length === 0) {
           	    availableWords[level] = [...words[level]];
        	}
        	let randomIndex = Math.floor(Math.random() * availableWords[level].length);
        	let randomWord = availableWords[level].splice(randomIndex, 1)[0];
        	let timeBonus = level === "simple" ? 30 : level === "moyen" ? 40 : 60;
        	document.getElementById("word").textContent = randomWord;
        	document.getElementById("success").textContent = `‚úÖ R√âUSSI (+${timeBonus}sec)`;
        	document.getElementById("word").classList.remove("hidden");
        	document.getElementById("action-buttons").classList.remove("hidden");
        	document.getElementById("difficulty-choices").classList.add("hidden");
        	document.getElementById("word").setAttribute("data-level", level);

            });
        });
        
        document.getElementById("success").addEventListener("click", function() {
            let level = document.getElementById("word").getAttribute("data-level");
            let timeBonus = level === "simple" ? 30 : level === "moyen" ? 40 : 60;
            timeLeft += timeBonus;
            successCount++;
            attempts++;
            document.getElementById("timer").textContent = timeLeft + "s";
            checkEndGame();
        });
        
        document.getElementById("pass").addEventListener("click", function() {
            timeLeft -= 15;
            attempts++;
            document.getElementById("timer").textContent = timeLeft + "s";
            checkEndGame();
        });
        
        function checkEndGame() {
            document.getElementById("counter").textContent = `${successCount} r√©ussis / ${attempts} tent√©s`;
        if (successCount >= 10) {
            clearInterval(timerInterval);
            endGame("GAGN√â !");
        }
            
            if (attempts % 3 === 0) {
                clearInterval(timerInterval);
                document.getElementById("word").classList.add("hidden");
                document.getElementById("continue").classList.remove("hidden");
                document.getElementById("action-buttons").classList.add("hidden");
            } else {
                resetForNextRound();
            }
        }

        function resetForNextRound() {
            document.getElementById("word").classList.add("hidden");
            document.getElementById("action-buttons").classList.add("hidden");
            document.getElementById("difficulty-choices").classList.remove("hidden");
        }
        
        document.getElementById("continue").addEventListener("click", function() {
            document.getElementById("continue").classList.add("hidden");
            resetForNextRound();
            startTimer();
        });
        
        document.getElementById("restart").addEventListener("click", function() {
            location.reload();
        });
    </script>
</body>
</html>
